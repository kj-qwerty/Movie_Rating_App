
{% extends "base.html" %}
{% block content %}
<h2>{{ "Edit Rating" if rating else "New Rating" }}</h2>

<form method="post">
  <div class="mb-3">
    <label class="form-label">User ID</label>
    <input class="form-control" name="userId" required value="{{ rating.userId if rating else '' }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Movie</label>
    <select name="movieId" class="form-select" required>
      <option value="">-- choose a movie --</option>
      {% for movie in movies %}
        {% set mid = movie._id %}
        <option value="{{ mid }}"
          {% if rating and rating.movieId == movie._id %}selected{% endif %}>
          {{ movie.title }}
        </option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Rating (0â€“10)</label>
    <input class="form-control" name="rating" type="number" step="0.1" min="0" max="10"
           value="{{ rating.rating if rating else '' }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Timestamp</label>
    <input class="form-control" name="timestamp" type="datetime-local"
           value="{{ ts_str if ts_str is defined else '' }}">
    <div class="form-text">Leave blank to use current time.</div>
  </div>
  <button class="btn btn-primary">Save</button>
  <a href="{{ url_for('rating_list') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
